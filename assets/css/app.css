/* Clean Tailwind CSS - Systematic Dashboard
   Minimal, readable, accessible design
   ============================================= */

@import "tailwindcss" source(none);
@source "../css";
@source "../js";
@source "../../lib/dashboard_phoenix_web";

/* Heroicons plugin */
@plugin "../vendor/heroicons";

/* daisyUI plugin */
@plugin "../vendor/daisyui" {
  themes: false;
}

/* daisyUI theme - Dark */
@plugin "../vendor/daisyui-theme" {
  name: "dark";
  default: false;
  prefersdark: true;
  color-scheme: "dark";
  --color-base-100: oklch(18% 0.02 265);
  --color-base-200: oklch(22% 0.02 265);
  --color-base-300: oklch(26% 0.02 265);
  --color-base-content: oklch(92% 0.01 260);
  --color-primary: oklch(65% 0.2 280);
  --color-primary-content: oklch(98% 0 0);
  --color-secondary: oklch(65% 0.15 240);
  --color-secondary-content: oklch(98% 0 0);
  --color-accent: oklch(70% 0.15 320);
  --color-accent-content: oklch(98% 0 0);
  --color-neutral: oklch(30% 0.02 260);
  --color-neutral-content: oklch(90% 0 0);
  --color-info: oklch(65% 0.15 240);
  --color-info-content: oklch(98% 0 0);
  --color-success: oklch(70% 0.15 160);
  --color-success-content: oklch(98% 0 0);
  --color-warning: oklch(80% 0.15 70);
  --color-warning-content: oklch(15% 0 0);
  --color-error: oklch(65% 0.2 30);
  --color-error-content: oklch(98% 0 0);
  --radius-selector: 0.375rem;
  --radius-field: 0.375rem;
  --radius-box: 0.5rem;
  --border: 1px;
}

/* daisyUI theme - Light */
@plugin "../vendor/daisyui-theme" {
  name: "light";
  default: true;
  prefersdark: false;
  color-scheme: "light";
  --color-base-100: oklch(99% 0 0);
  --color-base-200: oklch(97% 0.005 265);
  --color-base-300: oklch(94% 0.008 265);
  --color-base-content: oklch(25% 0.02 265);
  --color-primary: oklch(55% 0.2 280);
  --color-primary-content: oklch(98% 0 0);
  --color-secondary: oklch(50% 0.15 240);
  --color-secondary-content: oklch(98% 0 0);
  --color-accent: oklch(55% 0.15 320);
  --color-accent-content: oklch(98% 0 0);
  --color-neutral: oklch(45% 0.02 265);
  --color-neutral-content: oklch(98% 0 0);
  --color-info: oklch(55% 0.18 240);
  --color-info-content: oklch(98% 0 0);
  --color-success: oklch(55% 0.18 160);
  --color-success-content: oklch(98% 0 0);
  --color-warning: oklch(70% 0.18 70);
  --color-warning-content: oklch(15% 0 0);
  --color-error: oklch(55% 0.22 25);
  --color-error-content: oklch(98% 0 0);
  --radius-selector: 0.375rem;
  --radius-field: 0.375rem;
  --radius-box: 0.5rem;
  --border: 1px;
}

/* LiveView variants */
@custom-variant phx-click-loading (.phx-click-loading&, .phx-click-loading &);
@custom-variant phx-submit-loading (.phx-submit-loading&, .phx-submit-loading &);
@custom-variant phx-change-loading (.phx-change-loading&, .phx-change-loading &);

/* Dark mode variant */
@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

/* Make LiveView wrapper divs transparent */
[data-phx-session], [data-phx-teleported-src] { display: contents }

/* =====================================================
   BASE STYLES
   ===================================================== */

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1.6;
}

/* =====================================================
   PANEL SYSTEM - Clean, simple panels
   ===================================================== */

/* Base panel styles */
.panel {
  @apply bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700;
  @apply transition-colors duration-200;
}

/* Panel priorities - subtle visual weight differences */
.panel-priority-high {
  @apply bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700;
}

.panel-priority-medium {
  @apply bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700;
}

.panel-priority-compact {
  @apply bg-gray-50 dark:bg-gray-800/80 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700;
}

/* Panel accents - colored top border for categorization */
.panel-accent-critical {
  @apply border-t-2 border-t-purple-500;
}

.panel-accent-active {
  @apply border-t-2 border-t-green-500;
}

.panel-accent-reference {
  @apply border-t-2 border-t-blue-500;
}

/* Panel collapsed state */
.panel-collapsed {
  min-height: unset !important;
}

/* =====================================================
   PANEL STATUS INDICATORS - Simple colored borders
   ===================================================== */

.panel-status-error {
  @apply border-red-500 dark:border-red-500 border-2;
}

.panel-status-warning {
  @apply border-yellow-500 dark:border-yellow-500 border-2;
}

.panel-status-working {
  @apply border-green-500 dark:border-green-500;
}

.panel-status-loading {
  @apply border-blue-400 dark:border-blue-400;
}

.panel-status-urgent {
  @apply border-orange-500 dark:border-orange-500 border-2;
}

.panel-status-success {
  @apply border-green-500 dark:border-green-500;
}

.panel-status-idle {
  @apply opacity-90;
}

/* =====================================================
   PANEL HEADERS - Interactive collapsible headers
   ===================================================== */

.panel-header-interactive {
  @apply cursor-pointer transition-colors duration-150;
}

.panel-header-interactive:hover {
  @apply bg-gray-100 dark:bg-gray-700/50;
}

.panel-header-critical,
.panel-header-standard,
.panel-header-compact {
  @apply font-semibold text-gray-900 dark:text-gray-100;
}

.panel-header-critical {
  @apply text-lg;
}

.panel-header-standard {
  @apply text-base;
}

.panel-header-compact {
  @apply text-sm;
}

/* Panel chevron */
.panel-chevron {
  @apply transition-transform duration-200 text-gray-400;
}

.panel-chevron.collapsed {
  transform: rotate(-90deg);
}

/* Panel icon */
.panel-icon {
  @apply text-gray-400 dark:text-gray-500;
}

/* =====================================================
   STATUS INDICATORS - Simple dots and badges
   ===================================================== */

/* Status beacon - pulsing dot for active state */
.status-beacon {
  @apply w-3 h-3 rounded-full;
  animation: beacon-pulse 2s ease-in-out infinite;
}

@keyframes beacon-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1.1); }
}

/* Simple status marker */
.status-marker {
  @apply w-2 h-2 rounded-full;
}

.status-marker-idle {
  @apply opacity-50;
}

/* Activity ring spinner */
.status-activity-ring {
  @apply w-4 h-4 rounded-full border-2 border-transparent border-t-current border-r-current;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* =====================================================
   TYPOGRAPHY CLASSES
   ===================================================== */

.text-system-title {
  @apply text-2xl font-bold tracking-wide text-gray-900 dark:text-gray-100;
}

.text-section-header {
  @apply text-lg font-semibold text-gray-900 dark:text-gray-100;
}

.text-panel-label {
  @apply text-sm font-semibold uppercase tracking-wide text-gray-700 dark:text-gray-300;
}

.text-ui-label {
  @apply text-sm font-medium text-gray-700 dark:text-gray-300;
}

.text-ui-value {
  @apply font-mono text-sm text-gray-900 dark:text-gray-100;
}

.text-ui-body {
  @apply text-base text-gray-700 dark:text-gray-300;
}

.text-ui-caption {
  @apply text-sm text-gray-500 dark:text-gray-400;
}

.text-ui-micro {
  @apply text-xs text-gray-500 dark:text-gray-400;
}

/* =====================================================
   GLASS MORPHISM - Simple semi-transparent panels
   ===================================================== */

.glass-panel {
  @apply bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm;
  @apply border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm;
}

.glass-morphism {
  @apply bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm;
  @apply border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm;
}

.glass-header {
  @apply bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm;
  @apply border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50;
}

/* =====================================================
   HEALTH BADGE - Dashboard status indicator
   ===================================================== */

.health-badge {
  @apply inline-block w-2.5 h-2.5 rounded-full flex-shrink-0;
}

.health-badge-healthy {
  @apply bg-green-500;
}

.health-badge-unhealthy {
  @apply bg-red-500;
}

.health-badge-checking {
  @apply bg-yellow-500;
  animation: health-pulse 1.5s ease-in-out infinite;
}

@keyframes health-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.health-badge-unknown {
  @apply bg-gray-400;
}

/* =====================================================
   THROBBER - Loading spinner
   ===================================================== */

.throbber {
  @apply w-4 h-4 rounded-full border-2;
  border-color: rgba(251, 191, 36, 0.3);
  border-top-color: rgb(251, 191, 36);
  animation: spin 0.8s linear infinite;
}

.throbber-small {
  @apply w-2 h-2 rounded-full border;
  border-color: rgba(251, 191, 36, 0.3);
  border-top-color: rgb(251, 191, 36);
  animation: spin 0.8s linear infinite;
}

/* =====================================================
   BUTTONS - Interactive elements
   ===================================================== */

.btn-interactive-icon {
  @apply inline-flex items-center justify-center gap-1.5;
  @apply min-w-[44px] min-h-[44px] px-3 py-2;
  @apply text-sm font-medium;
  @apply transition-colors duration-150;
  @apply hover:bg-gray-100 dark:hover:bg-gray-700;
  @apply rounded-md;
}

.btn-interactive-sm {
  @apply inline-flex items-center justify-center gap-1;
  @apply min-w-[44px] min-h-[32px] px-2.5 py-1.5;
  @apply text-xs font-semibold uppercase;
  @apply transition-colors duration-150;
  @apply hover:bg-gray-100 dark:hover:bg-gray-700;
  @apply rounded-md;
}

.btn-interactive-close {
  @apply inline-flex items-center justify-center;
  @apply min-w-[44px] min-h-[44px] p-2;
  @apply transition-colors duration-150;
  @apply hover:bg-gray-100 dark:hover:bg-gray-700;
  @apply rounded-md;
}

/* =====================================================
   AGENT CARDS GRID
   ===================================================== */

.agent-cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 0.75rem;
}

.agent-card {
  @apply flex flex-col min-h-[100px] p-4;
  @apply bg-white dark:bg-gray-800 rounded-lg;
  @apply border border-gray-200 dark:border-gray-700;
  @apply transition-shadow duration-200;
}

.agent-card:hover {
  @apply shadow-md;
}

.agent-card-header {
  @apply flex items-center justify-between gap-2 mb-2;
}

.agent-card-identity {
  @apply flex items-center gap-2 min-w-0 flex-1;
}

.agent-card-icon {
  @apply text-xl flex-shrink-0;
}

.agent-card-name {
  @apply font-semibold text-sm text-gray-900 dark:text-gray-100;
  @apply overflow-hidden text-ellipsis whitespace-nowrap;
}

.agent-card-badges {
  @apply flex items-center gap-1.5 flex-shrink-0;
}

.agent-card-task {
  @apply text-sm text-gray-600 dark:text-gray-400 mt-auto;
  @apply line-clamp-2;
}

/* Agent card states */
.agent-card[data-state="running"] {
  @apply border-green-500 border-2;
}

.agent-card[data-state="completed"] {
  @apply border-blue-400;
}

.agent-card[data-state="failed"] {
  @apply border-red-500 border-2;
}

.agent-card[data-state="idle"] {
  @apply border-gray-200 dark:border-gray-700;
}

/* =====================================================
   SECTION HEADERS - Category groupings
   ===================================================== */

.section-core-work,
.section-agent-status,
.section-system-config {
  @apply bg-white dark:bg-gray-800/50 rounded-xl;
  @apply border border-gray-200 dark:border-gray-700;
}

.section-core-work {
  @apply border-l-4 border-l-green-500;
}

.section-agent-status {
  @apply border-l-4 border-l-purple-500;
}

.section-system-config {
  @apply border-l-4 border-l-orange-500;
}

/* =====================================================
   SKELETON LOADING
   ===================================================== */

.skeleton {
  @apply bg-gray-200 dark:bg-gray-700 rounded;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

.skeleton-text {
  @apply inline-block min-h-[1em] bg-gray-200 dark:bg-gray-700 rounded;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

@keyframes skeleton-shimmer {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
}

/* Loading ellipsis */
.loading-ellipsis::after {
  content: '';
  animation: ellipsis 1.5s steps(4) infinite;
}

@keyframes ellipsis {
  0% { content: ''; }
  25% { content: '.'; }
  50% { content: '..'; }
  75% { content: '...'; }
}

/* =====================================================
   ACCORDION / COLLAPSIBLE PANELS
   ===================================================== */

.accordion-content {
  @apply overflow-hidden transition-all duration-300 ease-out;
}

.accordion-content.accordion-collapsed {
  max-height: 0 !important;
  opacity: 0;
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

.accordion-content.accordion-expanded {
  opacity: 1;
}

.accordion-chevron {
  @apply transition-transform duration-200;
}

.accordion-chevron.accordion-closed {
  transform: rotate(-90deg);
}

.accordion-chevron.accordion-open {
  transform: rotate(0deg);
}

/* =====================================================
   FOCUS STATES - Accessibility
   ===================================================== */

button:focus-visible,
a:focus-visible,
[role="button"]:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  @apply outline-2 outline-blue-500 outline-offset-2;
}

/* Skip link */
.skip-link {
  @apply absolute -left-[9999px] w-px h-px overflow-hidden;
}

.skip-link:focus {
  @apply fixed top-2 left-2 w-auto h-auto p-2 px-4;
  @apply bg-gray-900 text-blue-400 border-2 border-blue-500;
  @apply rounded-md z-[9999] text-sm font-bold;
}

/* Screen reader only */
.sr-only {
  @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap;
  clip: rect(0, 0, 0, 0);
  border-width: 0;
}

/* =====================================================
   TEXT CONTRAST FIXES
   ===================================================== */

/* Boost low opacity text for accessibility */
.text-base-content\/30,
.text-base-content\/40 {
  @apply text-gray-600 dark:text-gray-400;
}

.text-base-content\/50,
.text-base-content\/60 {
  @apply text-gray-500 dark:text-gray-400;
}

.text-white\/60,
.text-white\/70 {
  @apply text-gray-700 dark:text-gray-300;
}

/* Light mode text overrides */
[data-theme="light"] .text-white {
  @apply text-gray-900;
}

/* =====================================================
   BACKGROUND CLASSES
   ===================================================== */

.bg-space {
  @apply bg-gray-50 dark:bg-gray-900 min-h-screen;
}

/* =====================================================
   PANEL ANIMATIONS - Reveal on load
   ===================================================== */

.panel-reveal {
  animation: panel-fade-in 0.3s ease-out forwards;
}

@keyframes panel-fade-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Staggered delays */
.panel-reveal-1 { animation-delay: 0ms; }
.panel-reveal-2 { animation-delay: 50ms; }
.panel-reveal-3 { animation-delay: 100ms; }
.panel-reveal-4 { animation-delay: 150ms; }
.panel-reveal-5 { animation-delay: 200ms; }
.panel-reveal-6 { animation-delay: 250ms; }

/* Section reveals */
.section-reveal {
  animation: section-fade-in 0.3s ease-out forwards;
}

@keyframes section-fade-in {
  from { opacity: 0; transform: translateX(-8px); }
  to { opacity: 1; transform: translateX(0); }
}

.section-reveal-1 { animation-delay: 0ms; }
.section-reveal-2 { animation-delay: 100ms; }
.section-reveal-3 { animation-delay: 200ms; }

/* =====================================================
   STATUS TRANSITION ANIMATIONS
   ===================================================== */

.status-transition {
  @apply transition-colors duration-200;
}

.status-pulse {
  animation: status-pulse-anim 0.5s ease-out;
}

@keyframes status-pulse-anim {
  0% { box-shadow: 0 0 0 0 currentColor; }
  50% { box-shadow: 0 0 0 4px transparent; }
  100% { box-shadow: none; }
}

.badge-bounce {
  animation: badge-bounce-anim 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes badge-bounce-anim {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}

/* New item highlight */
.item-new-highlight {
  animation: new-highlight 0.5s ease-out;
}

@keyframes new-highlight {
  from { background-color: rgba(59, 130, 246, 0.2); }
  to { background-color: transparent; }
}

/* =====================================================
   BUTTON MICRO-INTERACTIONS
   ===================================================== */

.btn-press:active {
  transform: scale(0.97);
}

.icon-spin-once {
  animation: spin 0.5s ease-out;
}

/* =====================================================
   TOOLTIP
   ===================================================== */

.tooltip-reveal {
  @apply opacity-0 pointer-events-none;
  @apply transition-opacity duration-150;
  transform: translateY(4px);
}

.tooltip-trigger:hover .tooltip-reveal,
.tooltip-trigger:focus .tooltip-reveal {
  @apply opacity-100 pointer-events-auto;
  transform: translateY(0);
}

/* =====================================================
   REDUCED MOTION - Accessibility
   ===================================================== */

@media (prefers-reduced-motion: reduce) {
  .panel-reveal,
  .section-reveal,
  .status-beacon,
  .status-activity-ring,
  .throbber,
  .throbber-small,
  .skeleton,
  .skeleton-text,
  .health-badge-checking,
  .status-pulse,
  .badge-bounce,
  .item-new-highlight,
  .icon-spin-once {
    animation: none !important;
  }
  
  .panel-reveal,
  .section-reveal {
    opacity: 1;
    transform: none;
  }
  
  .accordion-content,
  .accordion-chevron,
  .status-transition {
    transition: none !important;
  }
}

/* =====================================================
   RESPONSIVE ADJUSTMENTS
   ===================================================== */

@media (max-width: 640px) {
  .agent-cards-grid {
    grid-template-columns: 1fr;
  }
  
  .agent-card {
    min-height: 80px;
  }
  
  .text-system-title {
    @apply text-xl;
  }
  
  .text-section-header {
    @apply text-base;
  }
}

/* =====================================================
   MISC UTILITIES
   ===================================================== */

/* Loading dots */
.loading-dots {
  @apply inline-flex items-center gap-1.5;
}

.loading-dot {
  @apply w-2 h-2 rounded-full bg-current;
  animation: loading-dot-pulse 1.4s ease-in-out infinite;
}

.loading-dot:nth-child(1) { animation-delay: 0s; }
.loading-dot:nth-child(2) { animation-delay: 0.2s; }
.loading-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes loading-dot-pulse {
  0%, 80%, 100% { opacity: 0.3; transform: scale(0.8); }
  40% { opacity: 1; transform: scale(1); }
}

/* Signal strength indicator */
.status-signal {
  @apply flex items-end gap-0.5 h-3;
}

.status-signal-bar {
  @apply w-1 bg-current rounded-sm;
}

.status-signal-bar:nth-child(1) { height: 4px; }
.status-signal-bar:nth-child(2) { height: 8px; }
.status-signal-bar:nth-child(3) { height: 12px; }

.status-signal.signal-weak .status-signal-bar:nth-child(2),
.status-signal.signal-weak .status-signal-bar:nth-child(3) {
  @apply opacity-25;
}

.status-signal.signal-medium .status-signal-bar:nth-child(3) {
  @apply opacity-25;
}

/* Opacity fixes */
.opacity-40 { opacity: 0.6; }
.opacity-50 { opacity: 0.65; }

/* PR work indicator */
.animate-pulse-subtle {
  @apply border-purple-400;
}
